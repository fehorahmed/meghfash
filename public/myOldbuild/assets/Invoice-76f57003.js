import{u as b,r,X as k,j as s,S as w,x}from"./app-f7a8c7c8.js";import{M as T,A as S,j as N}from"./MainLayout-b26abb2f.js";function E({general:l,headerMenu:p,footerMenu2:j,footerMenu4:g,footerMenu3:f,categoryMenu:y,order:e,carts:d,auth:o,pixelData:i,pixelData2:n}){var _,u;const{cart:L,initializeCart:v}=b();r.useEffect(()=>{v(d)},[d]),k().props;const h=r.useRef(!0);if(r.useEffect(()=>{i&&(typeof fbq<"u"?fbq("track",i.event_name,{...i.custom_data,...i.user_data,event_id:i.event_id,event_time:i.event_time,event_source_url:i.event_source_url,action_source:i.action_source},{eventID:i.event_id}):console.warn("fbq not defined — check that Pixel script is loaded."))},[i]),r.useEffect(()=>{n&&(typeof fbq<"u"?fbq("track",n.event_name,{...n.custom_data,...n.user_data,event_id:n.event_id,event_time:n.event_time,event_source_url:n.event_source_url,action_source:n.action_source},{eventID:n.event_id}):console.warn("fbq not defined — check that Pixel script is loaded."))},[n]),h.current){h.current=!1;const t=c=>c.variants&&c.variants.length>0?c.variants.map(m=>`${m.title}:${m.value}`).join(","):null,a=(_=e==null?void 0:e.cartItems)==null?void 0:_.map(c=>({item_id:c.id,item_name:c.productName,index:c.index||0,item_category:null,item_variant:t(c),price:parseInt(c.subTotal.match(/\d+[\d,.]*/)[0].replace(/,/g,"")),quantity:c.quantity}));window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"purchase",ecommerce:{transaction_id:e.invoice,currency:l.currency,value:parseInt(e.total_price,10),coupon:e.coupon_id,tax:parseInt(e.tax,10),shipping:parseInt(e.shipping_charge,10),items:a},customer_info:{name:e.name,name_hash:e.nameSha256,email:e.email,email_hash:e.emailSha256,phone:e.mobile,phone_hash:e.phoneSha256,address:{street:e.address,street_hash:e.addressSha256,city:e.cityName,city_hash:e.citySha256,state:e.stateName,state_hash:e.stateSha256,zip:e.postal_code,country:"BD",country_hash:e.countrySha256}}}),console.log("parseche data layer call")}return r.useEffect(()=>{if((e==null?void 0:e.mail_send_status)==!1){const t=setTimeout(async()=>{try{const a=await fetch(`/order-status/${e.id}`,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`)}catch(a){console.error("Error fetching order status:",a)}},2e3);return()=>clearTimeout(t)}else console.log("Mail already sent")},[]),s.jsx(s.Fragment,{children:s.jsxs(T,{auth:o,general:l,headerMenu:p,footerMenu4:g,footerMenu3:f,categoryMenu:y,footerMenu2:j,children:[s.jsxs(w,{title:`Invoice - ${l.web_title}`,children:[s.jsx("meta",{name:"title",property:"og:title",content:`Invoice - ${l.web_title}`}),s.jsx("meta",{name:"description",property:"og:description",content:l.meta_description}),s.jsx("meta",{name:"keyword",property:"og:keyword",content:l.meta_keyword}),s.jsx("meta",{name:"image",property:"og:image",content:l.logo_url}),s.jsx("meta",{name:"url",property:"og:url",content:route("invoiceView",e.invoice)}),s.jsx("link",{rel:"canonical",href:route("invoiceView",e.invoice)})]}),s.jsx("div",{class:"checkout__page--area",children:s.jsx("div",{class:"container",children:s.jsx("div",{class:"checkout__page--inner",children:s.jsx("div",{class:"main checkout__mian",style:{margin:"auto"},children:s.jsxs("div",{class:"checkout__content--step section__shipping--address pt-0",children:[s.jsxs("div",{class:"section__header checkout__header--style3 position__relative mb-25",children:[s.jsxs("span",{class:"checkout__order--number",children:["Order #",e.invoice]}),s.jsx("div",{class:"checkout__submission--icon",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25.995",height:"25.979",viewBox:"0 0 512 512",children:s.jsx("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M416 128L192 384l-96-96"})})})]}),s.jsx("p",{className:"orderNote",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:e.completeNote}})}),s.jsxs("div",{class:"customer__information--area border-radius-5",children:[s.jsx("h3",{class:"customer__information--title h4",style:{marginTop:"20px"},children:"Customer Information"}),s.jsxs("div",{class:"customer__information--inner d-flex",children:[s.jsx("div",{class:"customer__information--list",children:s.jsxs("div",{class:"customer__information--step",children:[s.jsxs("p",{style:{marginBottom:"15px"},children:[s.jsx("b",{children:"Name:"})," ",e.name," ",s.jsx("br",{}),s.jsx("b",{children:"Mobile: "})," ",e.mobile,s.jsx("br",{}),e.email&&s.jsxs(s.Fragment,{children:[s.jsx("b",{children:"Email: "})," ",e.email,s.jsx("br",{})]}),s.jsx("b",{children:"Address: "})," ",e.full_address]}),s.jsx("br",{})]})}),s.jsx("div",{class:"customer__information--list",style:{display:"flex",alignItems:"baseline",justifyContent:"end"},children:s.jsxs("div",{class:"customer__information--step",children:[s.jsx("h4",{class:"customer__information--subtitle h5",children:"Payment method"}),s.jsx("ul",{children:s.jsx("li",{children:s.jsx("span",{class:"customer__information--text",children:e.payment_method})})})]})})]}),s.jsxs("details",{class:"order__summary--mobile__version",style:{display:"block"},open:!0,children:[s.jsx("summary",{class:"order__summary--toggle border-radius-5",children:s.jsxs("span",{class:"order__summary--toggle__inner",children:[s.jsx("span",{class:"order__summary--toggle__icon",children:s.jsx("svg",{width:"20",height:"19",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M17.178 13.088H5.453c-.454 0-.91-.364-.91-.818L3.727 1.818H0V0h4.544c.455 0 .91.364.91.818l.09 1.272h13.45c.274 0 .547.09.73.364.18.182.27.454.18.727l-1.817 9.18c-.09.455-.455.728-.91.728zM6.27 11.27h10.09l1.454-7.362H5.634l.637 7.362zm.092 7.715c1.004 0 1.818-.813 1.818-1.817s-.814-1.818-1.818-1.818-1.818.814-1.818 1.818.814 1.817 1.818 1.817zm9.18 0c1.004 0 1.817-.813 1.817-1.817s-.814-1.818-1.818-1.818-1.818.814-1.818 1.818.814 1.817 1.818 1.817z",fill:"currentColor"})})}),s.jsxs("span",{class:"order__summary--toggle__text show",children:[s.jsx("span",{children:"Show order summary"}),s.jsx("svg",{width:"11",height:"6",xmlns:"http://www.w3.org/2000/svg",class:"order-summary-toggle__dropdown",fill:"currentColor",children:s.jsx("path",{d:"M.504 1.813l4.358 3.845.496.438.496-.438 4.642-4.096L9.504.438 4.862 4.534h.992L1.496.69.504 1.812z"})})]}),s.jsx("span",{class:"order__summary--final__price",children:e.grandTotal})]})}),s.jsxs("div",{class:"order__summary--section",children:[s.jsx("div",{class:"cart__table checkout__product--table",children:s.jsxs("table",{class:"cart__table--inner",children:[s.jsx("thead",{class:"cart__table--header",children:s.jsxs("tr",{class:"cart__table--header__items",children:[s.jsx("th",{class:"",style:{padding:"5px 10px",borderBottom:"1px solid #e4e4e4"},children:"Product "}),s.jsx("th",{class:"",style:{padding:"5px 10px",borderBottom:"1px solid #e4e4e4",minWidth:"120px"},children:"Price "}),s.jsx("th",{class:"",style:{padding:"5px 10px",borderBottom:"1px solid #e4e4e4"},children:"Qty "}),s.jsx("th",{class:"",style:{padding:"5px 10px",borderBottom:"1px solid #e4e4e4",minWidth:"120px",textAlign:"right"},children:"Total "})]})}),s.jsx("tbody",{class:"cart__table--body",children:(u=e==null?void 0:e.cartItems)==null?void 0:u.map(t=>{var a;return s.jsxs("tr",{class:"cart__table--body__items",children:[s.jsx("td",{class:"",children:s.jsxs("div",{class:"cart__product d-flex align-items-center",children:[t.productImage&&s.jsx("div",{class:"cart__thumbnail",children:s.jsx("img",{class:"border-radius-5",src:t.productImage,alt:"cart-product"})}),s.jsxs("div",{class:"cart__content",children:[s.jsx("h4",{class:"cart__content--title",children:s.jsx("span",{children:t.productName})}),(a=t==null?void 0:t.variants)==null?void 0:a.map(c=>s.jsxs("span",{class:"cart__content--variant",children:[" ",c.title,": ",c.value," "]}))]})]})}),s.jsx("td",{class:"",children:s.jsxs("span",{class:"cart__price",children:[t.finalPrice," "]})}),s.jsx("td",{class:"",style:{textAlign:"center"},children:t.quantity}),s.jsx("td",{style:{textAlign:"right"},children:s.jsxs("span",{class:"cart__price end",children:[t.subTotal," "]})})]},t.id)})})]})}),s.jsx("div",{class:"checkout__total",children:s.jsxs("table",{class:"checkout__total--table",children:[s.jsxs("tbody",{class:"checkout__total--body",children:[s.jsxs("tr",{class:"checkout__total--items",children:[s.jsx("td",{class:"checkout__total--title text-left",children:"Subtotal "}),s.jsx("td",{class:"checkout__total--amount text-right",children:e.subTotal})]}),s.jsxs("tr",{class:"checkout__total--items",children:[s.jsx("td",{class:"checkout__total--title text-left",children:"Discount"}),s.jsx("td",{class:"checkout__total--amount text-right",children:e.discountTotal})]}),s.jsxs("tr",{class:"checkout__total--items",children:[s.jsx("td",{class:"checkout__total--title text-left",children:"Shipping Charge"}),s.jsx("td",{class:"checkout__total--amount text-right",children:e.chargeTotal})]})]}),s.jsx("tfoot",{class:"checkout__total--footer",children:s.jsxs("tr",{class:"checkout__total--footer__items",children:[s.jsx("td",{class:"checkout__total--footer__title checkout__total--footer__list text-left",children:"Total "}),s.jsx("td",{class:"checkout__total--footer__amount checkout__total--footer__list text-right",children:e.grandTotal})]})})]})})]})]}),s.jsx("br",{}),s.jsxs("p",{style:{textAlign:"center"},children:["Thank you for shopping from ",l.title]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-5 ",style:{padding:"15px",textAlign:"center"},children:s.jsxs(x,{href:route("index"),className:"primary__btn",children:[s.jsx(S,{style:{marginRight:"5px"}}),"Continue Shopping"]})}),s.jsx("div",{className:"col-md-2"}),(o==null?void 0:o.user)&&s.jsx("div",{className:"col-md-5",style:{padding:"15px",textAlign:"center"},children:s.jsxs(x,{href:route("customer.myOrders"),className:"secondary_btn",children:["Order List",s.jsx(N,{style:{marginLeft:"5px"}})]})})]})]})]})})})})})]})})}export{E as default};
