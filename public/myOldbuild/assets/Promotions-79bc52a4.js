import{r as s,j as e,x as k}from"./app-f7a8c7c8.js";import{M as S}from"./MainLayout-b26abb2f.js";import{P as C}from"./ProductGrid-42fa2b4f.js";import"./RatingStar-14c015d6.js";function I({general:f,headerMenu:x,footerMenu4:h,footerMenu3:_,categoryMenu:j,auth:p,category:b,products:F,footerMenu2:v,carts:g,attributes:M,subCtg:R,maxPrice:w,promotions:r}){const[N,i]=s.useState(!1),l=s.useRef(!0),[d,$]=s.useState({category:[],color:[],attribute:[],fabric:[],size:[],cut_fit:[],min_price:0,max_price:w,sort_by:"latest"}),[u,y]=s.useState(r.products),[D,L]=s.useState({total:r.products.total,from:r.products.from,to:r.products.to}),E=async()=>{i(!0);try{const t=new URLSearchParams(d),c=await fetch(`/product/filter/${b.slug}?${t}`,{method:"GET",headers:{Accept:"application/json"}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const o=await c.json();y(o.products),L({total:o.products.total,from:o.products.from,to:o.products.to}),console.log(o)}catch(t){console.error("Error fetching filtered data:",t.message)}finally{i(!1)}};s.useEffect(()=>{l.current?l.current=!1:E()},[d]);const[a,m]=s.useState(!1),n=s.useRef(null),P=()=>{m(!a)};return s.useEffect(()=>{const t=c=>{n.current&&!n.current.contains(c.target)&&a&&m(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[a]),s.useEffect(()=>{a?document.body.classList.add("offcanvas__filter--sidebar_active"):document.body.classList.remove("offcanvas__filter--sidebar_active")},[a]),console.log(r),e.jsx(e.Fragment,{children:e.jsxs(S,{auth:p,general:f,headerMenu:x,footerMenu4:h,footerMenu3:_,categoryMenu:j,footerMenu2:v,carts:g,children:[e.jsx("section",{className:"breadcrumb__section breadcrumb__bg",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row row-cols-1",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"breadcrumb__content text-center",children:[e.jsx("h1",{className:"breadcrumb__content--title text-white mb-25",children:r.name}),e.jsxs("ul",{className:"breadcrumb__content--menu d-flex justify-content-center",children:[e.jsx("li",{className:"breadcrumb__content--menu__items",children:e.jsx(k,{className:"text-white",href:route("index"),children:"Home "})}),e.jsx("li",{className:"breadcrumb__content--menu__items",children:e.jsx("span",{className:"text-white",children:r.name})})]})]})})})})}),e.jsx("section",{className:"shop__section section--padding",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-3 col-lg-4"}),e.jsx("div",{className:"col-xl-12 col-lg-8",children:e.jsx("div",{className:"shop__product--wrapper",children:N?e.jsx("p",{className:"text-center",children:"Loading..."}):e.jsx(e.Fragment,{children:u.length>0?e.jsx("div",{children:e.jsx("div",{className:"product__section--inner product__grid--inner",children:e.jsx("div",{className:"row row-cols-xl-4 row-cols-lg-4 row-cols-md-3 row-cols-2 mb--n30",children:u.map((t,c)=>e.jsx("div",{className:"col mb-30",children:e.jsx(C,{product:t})},c))})})}):e.jsx("div",{className:"text-center",children:"No products found"})})})})]})})}),e.jsx("div",{ref:n,class:`offcanvas__filter--sidebar widget__area ${a?"active":""}`,children:e.jsxs("button",{type:"button",class:"offcanvas__filter--close",onClick:P,children:[e.jsx("svg",{class:"minicart__close--icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{fill:"currentColor",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144M368 144L144 368"})})," ",e.jsx("span",{class:"offcanvas__filter--close__text",children:"Close"})]})})]})})}export{I as default};
