import{r as t,j as e,S as se}from"./app-f7a8c7c8.js";import{A as te}from"./AlertMassageCompononets-dd35f479.js";import{S as re}from"./SideBar-57f7ca09.js";import{M as ae}from"./MainLayout-b26abb2f.js";function ie({general:o,headerMenu:C,footerMenu4:M,footerMenu3:F,footerMenu2:T,categoryMenu:L,carts:P,auth:c,district:A,user:D}){const[I,i]=t.useState(""),[d,p]=t.useState(!1),[h,O]=t.useState(c.user.name),[x,R]=t.useState(c.user.email),[f,q]=t.useState(c.user.mobile),[_,z]=t.useState(c.user.address_line1),[U,m]=t.useState(""),[j,g]=t.useState(""),[b,$]=t.useState(""),[y,Y]=t.useState(""),[B,S]=t.useState(!1),[v,K]=t.useState([]),[l,W]=t.useState(c.user.district),[w,X]=t.useState(c.user.city),N=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),[H,J]=t.useState(null),[G,E]=t.useState(!1),Q=async s=>{const r=s.target.files[0];if(r){E(!0);try{const n=new FormData;n.append("upload","image"),n.append("image",r);const k=await fetch("/customer/profile",{method:"POST",headers:{Accept:"application/json","X-CSRF-TOKEN":N},body:n}),u=await k.json();k.ok?(console.log("Server response:",u.message),m("success"),i("Image uploaded successfully!")):u.errors&&g(u.errors.name||"Something went wrong!")}catch(n){console.error("Error uploading image:",n),i("Something went wrong!")}finally{E(!1)}const a=URL.createObjectURL(r);J(a)}else console.log("No file selected")},V=async s=>{s.preventDefault(),S(!0);try{const r=await fetch("/customer/profile",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":N},body:JSON.stringify({name:h,email:x,mobile:f,district:l,city:w,address:_})}),a=await r.json();r.ok?(i(a.message),p(a.success),console.log(a.message),m("success")):a.errors&&(g(a.errors.name),$(a.errors.email),Y(a.errors.mobile),i("Somthing want to worng!"),p(a.success),m("error")),console.log("Server response:",a)}catch(r){console.log(r)}finally{S(!1)}};t.useEffect(()=>{(async()=>{if(l)try{const r=await fetch(`/customer/profile?district_id=${l}`);if(!r.ok)throw new Error(`Failed to fetch thanas: ${r.statusText}`);const a=await r.json();K(a.datas)}catch(r){console.error("Error fetching thanas:",r)}})()},[l]);const Z=s=>{W(s.target.value)},ee=s=>{X(s.target.value)};return e.jsx(e.Fragment,{children:e.jsxs(ae,{auth:c,general:o,headerMenu:C,footerMenu4:M,footerMenu3:F,categoryMenu:L,footerMenu2:T,carts:P,children:[e.jsxs(se,{title:`My Profile - ${o.web_title}`,children:[e.jsx("meta",{name:"title",property:"og:title",content:`My Profile - ${o.web_title}`}),e.jsx("meta",{name:"description",property:"og:description",content:o.meta_description}),e.jsx("meta",{name:"keyword",property:"og:keyword",content:o.meta_keyword}),e.jsx("meta",{name:"image",property:"og:image",content:o.logo_url}),e.jsx("meta",{name:"url",property:"og:url",content:route("customer.profile")}),e.jsx("link",{rel:"canonical",href:route("customer.profile")})]}),e.jsx("section",{class:"my__account--section section--padding",children:e.jsxs("div",{class:"container",children:[e.jsxs("p",{class:"account__welcome--text",children:["Hello, ",c.user.name," welcome to your dashboard!"]}),e.jsxs("div",{class:"my__account--section__inner border-radius-10 d-flex",children:[e.jsx(re,{auth:c}),e.jsx("div",{class:"account__wrapper",children:e.jsxs("div",{class:"account__content",children:[e.jsx("h2",{class:"account__content--title h3 mb-20",children:"My Profile"}),e.jsxs("div",{children:[e.jsx(te,{status:U,message:I}),e.jsx("form",{class:"contact__form--inner",onSubmit:V,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"ProfileInfo",children:[e.jsx("div",{style:{position:"relative",marginBottom:"20px",width:"100%"},children:e.jsx("img",{src:H||D.image_url,alt:"Selected",style:{objectFit:"cover",display:"block",margin:"0 auto",height:"100%"}})}),e.jsxs("div",{className:"mb-3 text-center",style:{width:"100%"},children:[e.jsx("input",{type:"file",id:"formFile",className:"form-control",style:{display:"none"},onChange:Q}),e.jsx("label",{htmlFor:"formFile",className:"btn btn-danger",style:{display:"inline-block",padding:"10px 20px",fontSize:"16px",cursor:"pointer"},children:G?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Loading..."]}):"Select Image"})]})]})}),e.jsxs("div",{className:"col-md-9",children:[e.jsxs("div",{class:"row",children:[e.jsx("div",{class:"col-lg-12 col-md-12",children:e.jsxs("div",{class:"contact__form--list mb-20",children:[e.jsxs("label",{class:"contact__form--label",for:"input1",children:["Your Name",e.jsx("span",{class:"contact__form--label__star",children:"* "})]}),e.jsx("input",{class:"contact__form--input",name:"name",id:"input1",placeholder:"Your Name",type:"text",required:"",value:h,onChange:s=>O(s.target.value)}),d==!0?"":e.jsxs("p",{className:"errrowMsg",style:{fontSize:"14px"},children:[" ",j&&e.jsx("span",{children:j}),"  "]})]})}),e.jsx("div",{class:"col-lg-6 col-md-6",children:e.jsxs("div",{class:"contact__form--list mb-20",children:[e.jsxs("label",{class:"contact__form--label",for:"input4",children:["Email ",e.jsx("span",{class:"contact__form--label__star",children:"* "})]}),e.jsx("input",{class:"contact__form--input",name:"email",id:"input4",placeholder:"Email",type:"email",onChange:s=>R(s.target.value),value:x,required:""}),d==!0?"":e.jsxs("p",{className:"errrowMsg",style:{fontSize:"14px"},children:[" ",b&&e.jsx("span",{children:b}),"  "]})]})}),e.jsx("div",{class:"col-lg-6 col-md-6",children:e.jsxs("div",{class:"contact__form--list mb-20",children:[e.jsxs("label",{class:"contact__form--label",for:"input3",children:["Mobile Number ",e.jsx("span",{class:"contact__form--label__star",children:"* "})]}),e.jsx("input",{class:"contact__form--input",name:"mobile",id:"input3",value:f,placeholder:"Mobile number",type:"text",onChange:s=>q(s.target.value),required:""}),d==!0?"":e.jsxs("p",{className:"errrowMsg",style:{fontSize:"14px"},children:[" ",y&&e.jsx("span",{children:y}),"  "]})]})}),e.jsx("div",{class:"col-lg-6 mb-12",children:e.jsx("div",{class:"checkout__input--list checkout__input--select select",children:e.jsxs("select",{class:"form-select checkout__input--select__field border-radius-5",name:"district",value:l,onChange:Z,children:[e.jsx("option",{value:"",children:"Select District"}),A.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})}),e.jsx("div",{class:"col-lg-6 mb-12",children:e.jsx("div",{class:"checkout__input--list checkout__input--select select",children:e.jsxs("select",{class:"form-select checkout__input--select__field border-radius-5",disabled:!v.length,name:"city",value:w,onChange:ee,children:[e.jsx("option",{value:"",children:"Select Thana"}),v.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})}),e.jsx("div",{class:"col-12",children:e.jsxs("div",{class:"contact__form--list mb-15",children:[e.jsxs("label",{class:"contact__form--label",for:"input5",children:["Address",e.jsx("span",{class:"contact__form--label__star",children:"* "})]}),e.jsx("textarea",{class:"contact__form--textarea",name:"address",placeholder:"Write Your Message",value:_,onChange:s=>z(s.target.value)})]})})]}),e.jsx("button",{class:"contact__form--btn primary__btn",type:"submit",style:{position:"relative",minWidth:"200px"},children:B?e.jsx("span",{className:"loading"}):e.jsx("span",{children:"Submit Now"})})]})]})})]})]})})]})]})})]})})}export{ie as default};
