import{r as t,j as s,S as I,x as L}from"./app-f7a8c7c8.js";import{M as J,a as b,b as K,d as X}from"./MainLayout-b26abb2f.js";function q({general:v,headerMenu:f,footerMenu2:y,footerMenu3:w,footerMenu4:S,categoryMenu:C,auth:N}){const[i,r]=t.useState(""),[x,d]=t.useState(!1),[h,u]=t.useState("number"),[p,c]=t.useState(!1),[a,E]=t.useState(""),[m,k]=t.useState(""),[j,O]=t.useState(""),[_,F]=t.useState(""),g=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),P=async o=>{o.preventDefault(),c(!0);try{const e=await fetch("/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":g},body:JSON.stringify({email_phone:a})});if(!e.ok)throw new Error("Network response was not ok");const n=await e.json();r(n.message),d(n.success),n.success&&u("otp"),console.log("Server response:",n)}catch(e){console.error("Error:",e.message),r("Something went wrong!")}finally{c(!1)}},T=o=>{const e=o.target.value;E(e)},R=o=>{const e=o.target.value;k(e)},A=()=>{u("number")},M=async o=>{o.preventDefault(),c(!0);try{const e=await fetch("/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":g},body:JSON.stringify({email_phone:a,otpCode:m})});if(!e.ok)throw new Error("Network response was not ok");const n=await e.json();r(n.message),d(n.success),n.success&&u("confirm"),console.log("Server response:",n)}catch(e){console.error("Error:",e.message),r("Something went wrong!")}finally{c(!1)}},D=async o=>{o.preventDefault(),c(!0);const e={email_phone:a,otpCode:m,password:_,confirm_password:j};try{const n=await fetch("/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":g},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");const l=await n.json();r(l.message),d(l.success),l.success&&X.Inertia.visit("/customer/dashboard"),console.log("Server response:",l)}catch(n){console.error("Error:",n.message),r("Something went wrong!")}finally{c(!1)}};return s.jsxs(J,{auth:N,general:v,headerMenu:f,footerMenu2:y,footerMenu3:w,footerMenu4:S,categoryMenu:C,children:[s.jsx(I,{title:"Login"}),s.jsxs("div",{className:"",style:{minHeight:"400px"},children:[h=="number"&&s.jsx("div",{class:"login__section section--padding",children:s.jsx("div",{class:"container",children:s.jsx("div",{class:"login__section--inner",children:s.jsxs("div",{class:"row ",children:[s.jsx("div",{className:"col-md-3"}),s.jsx("div",{class:"col-md-6",children:s.jsxs("div",{class:"account__login",children:[s.jsx("div",{class:"account__login--header mb-25",children:s.jsx("h2",{class:"account__login--header__title h3 mb-10",children:"Forgot Password "})}),s.jsx("div",{class:"account__login--inner",children:s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:P,children:[s.jsx("label",{children:"You Email/Mobile number"}),s.jsx("label",{children:x?s.jsx("span",{style:{color:"green"},children:i}):s.jsx("span",{style:{color:"red"},children:i})}),s.jsx("input",{class:"account__login--input",placeholder:"E-mail or Mobile number",type:"text",value:a,onChange:T}),s.jsxs("button",{class:"account__login--btn primary__btn mb-10",type:"submit",children:[p?s.jsx("div",{class:"spinner-border ",role:"status"}):"Continue",s.jsx(b,{})]})]}),s.jsxs("p",{class:"account__login--signup__text mt-3",children:[" ",s.jsx("span",{style:{fontWeight:"normal"},children:"Don,t Have an Account?"}),"  ",s.jsx(L,{href:route("register"),children:s.jsx("button",{type:"submit",children:"Sign up now "})})]})]})})]})}),s.jsx("div",{className:"col-md-3"})]})})})}),h=="otp"&&s.jsx(s.Fragment,{children:s.jsx("div",{class:"login__section section--padding",children:s.jsx("div",{class:"container",children:s.jsx("div",{class:"login__section--inner",children:s.jsxs("div",{class:"row ",children:[s.jsx("div",{className:"col-md-3"}),s.jsx("div",{class:"col-md-6",children:s.jsxs("div",{class:"account__login",children:[s.jsx("div",{class:"account__login--header mb-25",children:s.jsx("h2",{class:"account__login--header__title h3 mb-10",children:"Forgot Password "})}),s.jsx("div",{class:"account__login--inner",children:s.jsxs("form",{onSubmit:M,children:[s.jsxs("label",{style:{color:"gray"},children:[a,s.jsxs("span",{onClick:A,style:{padding:"0px 15px",color:"#ffffff",cursor:"pointer",display:"inline-block",background:"#dd0909",margin:"0 5px",borderRadius:"5",display:"inline-flex",alignItems:"center"},children:[s.jsx(K,{style:{marginRight:"5px"}}),"Edit"]})]}),x?s.jsx("span",{style:{color:"green"},children:i}):s.jsx("span",{style:{color:"red"},children:i}),s.jsx("input",{class:"account__login--input",placeholder:"6 digit Code",type:"number",value:m,onChange:R}),s.jsxs("button",{class:"account__login--btn primary__btn mb-10",type:"submit",children:[p?s.jsx("div",{class:"spinner-border ",role:"status"}):" Verify OTP",s.jsx(b,{})]})]})})]})}),s.jsx("div",{className:"col-md-3"})]})})})})}),h=="confirm"&&s.jsx("div",{class:"login__section section--padding",children:s.jsx("div",{class:"container",children:s.jsx("div",{class:"login__section--inner",children:s.jsxs("div",{class:"row ",children:[s.jsx("div",{className:"col-md-3"}),s.jsx("div",{class:"col-md-6",children:s.jsxs("div",{class:"account__login",children:[s.jsx("div",{class:"account__login--header mb-25",children:s.jsx("h2",{class:"account__login--header__title h3 mb-10",children:"Forgot Password "})}),s.jsx("div",{class:"account__login--inner",children:s.jsxs("form",{onSubmit:D,children:[s.jsx("label",{children:"Password *"}),s.jsx("input",{class:"account__login--input",placeholder:"Your Name",type:"password",value:_,onChange:o=>F(o.target.value)}),s.jsx("label",{children:"Confirm Password *"}),s.jsx("input",{class:"account__login--input",placeholder:"Confirm Password",type:"password",value:j,onChange:o=>O(o.target.value)}),s.jsx("button",{class:"account__login--btn primary__btn mb-10",type:"submit",children:p?s.jsx("div",{class:"spinner-border ",role:"status"}):" Submit"})]})})]})}),s.jsx("div",{className:"col-md-3"})]})})})})]})]})}export{q as default};
